openapi: 3.0.0
info:
  title: Data Format Requirements Specification
  version: v3.0.0
  description: "Requirements are captured using Open API Specification (OAS) as a means to streamline capturing:\n-\tStandard data element names following standard naming conventions\n-\tData relationships (e.g. associative, hierarchical)\n-\tMultiplicity/cardinality\n-\tValid values including enumerations\n-\tRequired vs. optional\n\nThis is a logical requirements specification and does not consider a specific technology or implementation.  The primary consumer of these requirements is the BSC Implementation TC (ITC).\n\nIt is anticipated the ITC can and will choose a different data organization that is optimal for storage and retrieval given implementation specifics and interoperability considerations.  The use of OAS and associated JSON-based examples by DFTC in this specification is solely a means to capture requirements for human consumption.  It does not specify or imply a physical API or JSON-oriented storage structure."
  contact:
    name: Ben Kothari
    url: 'http://www.acuwize.com'
servers:
  - url: /
    description: ''
paths:
  /location: {}
components:
  schemas:
    Location:
      allOf:
        - $ref: 'https://redblue36.github.io/DataFormatDemoSwaggerUI/common.yml#/components/schemas/Meta'
        - $ref: '#/components/schemas/Position'
        - type: object
          properties:
            positions:
              type: array
              description: |-
                Array of Positions within a Location site.

                If a location position has more than 1
                position, then a sub-class of positions is provided. This array contains 1 or more Position-implementing structures that each describe the location. When the array contains more than 1 structure, each structure is meant to represent the same location but using a different method (i.e. latitude/longitude vs postal address etc).

                Within the Position a precedence number which is optional (starting at 1 and incrementing from there) identifies the order in which structures are preferred. In other words, the structure with a Precedence value of 1 is the ‘native’ or preferred structure to use for determining the location. It is expected that data consumers within the industry will use the structure with Precedence 1 and ignore the others. Data consumers unable to interpret the structure (method) with Precedence 1 would move on to the structure with Precedence 2 but if that one also uses a method unfamiliar to them, then to 3, etc.

                Position structure can contain nested structures including optional (nullable) nested structures to handle scenarios where a method for specifying a location may have instances where a detailed location is needed and others where a detailed location description is not needed (or possible). For example, a location at a Warehouse would have as the root position structure (the root implements Position), the postal address of the warehouse. Within that structure could be nested a warehouse zone identifying an area that the warehouse is sub-divided into. And within the Warehouse Zone structure could be nested a bin or shelf that might identify the specific location needed for a warehouse picker to locate an item
              items:
                $ref: '#/components/schemas/Position'
      description: |-
        The overall logical data requirements and release management for the Location Component, as defined by BSC Data Format Technical Committee, is described in detail at this master location [linked here](https://redblue36.github.io/DataFormatDemoSwaggerUI/location_doc.html).

        This specification has been used to generate a visual representation to easily digest the data structure.  This UML diagram is [linked here](https://raw.githubusercontent.com/redblue36/DataFormatDemoSwaggerUI/master/diagrams/location.png).

        INTENDED USAGE:

        A location may have a nested relationship with aliases or alternate references for the same location.

        When the position array contains more than 1 structure, each structure is meant to represent the same location but using a different method such as latitude/longitude, postal address etc.

        Multiple methods are supported in order to meet these goals:
        a) Make the Location Component suitable for multiple use cases
        b) Support the expansion of the Location Component specification in a backwards-compatible way in the future

        The intention is to improve the adoption rates of this Specification.  For example, the rail industry has an industry-specific method of specifying locations called the SPLC. Third parties may not have the ability to interpret this data so railway operators publishing locations in SPLC formats have the ability to publish a second more widely-known method such as latitude/longitude.

        Position structure can contain nested structures including optional nested structures to handle scenarios where a method for specifying a location may have instances where a detailed location is needed and others where a detailed location description is not needed (or possible). For example, a location at a Warehouse would have as the root location structure (the root implements Position) specifying the postal address of the warehouse. Within that structure could be nested a warehouse zone identifying an area that the warehouse is sub-divided into. And within the Warehouse Zone structure could be nested a bin or shelf that might identify the specific location needed for a warehouse picker to locate an item

        //TODO the nesting is only 2 levels deep in the original published Location Component specification and this OAS spec.  Need to reconcile/clarify the verbiage here vs. the specs.

        //TODO warehouse zone, bin, shelf in in the text above but there is no reference to this in the data structure specified in the published spec.  It is specified in the OAS spec here.  Need to reconcile all this to ensure the data elements are properly defined, reviewed, and published.

        Within the Position array, an optional precedence number (starting at 1 and incrementing from there) identifies the order in which structures are preferred. In other words, the structure with a Precedence value of 1 is the ‘native’ or preferred structure to use for determining the location. It is expected that data consumers will use the structure with Precedence 1 and ignore the others. Data consumers unable to interpret the structure (method) with Precedence 1 would move on to the structure with Precedence 2 but if that one also uses a method unfamiliar to them, then to 3, etc.
      x-tags:
        - Location/Location
      x-examples: {}
      title: Location Component
    Position:
      title: Position
      type: object
      description: Position is dependant object and may be used to document locations when they are presented in a hierarchy.  Location Object has all the properties of Position object.  Location Object has mandatory ID (identifier) where position object does not have identifier.
      x-tags:
        - Location/Position
      properties:
        name:
          type: string
          description: |
            Name of the location site.
        qualifier:
          type: string
          enum:
            - Address
            - GeoCoord
            - SPLC
            - City
            - Link
            - Multiple
          description: Identfies the type of Location.
        latitude:
          type: number
          description: Value representing latitude in degrees and minutes.
        longitude:
          type: number
          description: Value representing longitude in degrees and minutes
        accuracyMeters:
          type: number
          description: Accuracy of latitude/longitude within meters.
        altitudeMeters:
          type: number
          description: Accuracy of height within meters.
        SPLC:
          type: string
          description: |-
            Standard Point Location Code standard value per [https://www.railinc.com/rportal/standard-point-location-code](https://www.railinc.com/rportal/standard-point-location-code)

            The rail industry has an industry-specific method of specifying locations called the SPLC. Third parties may not have the ability to interpret this data so railway operators publishing locations in SPLC formats have the ability to publish a second more widely-known method such as latitude/longitude.
        addressLine1:
          type: string
          description: 'Street, Apt, Suite information'
        addressLine2:
          type: string
          description: 'Street, Apt #, Suite #, information'
        city:
          type: string
          description: City name
        stateProvince:
          type: string
          description: State or Province name
        zipPostal:
          type: string
          description: Zip code
        country:
          type: string
          description: |-
            Name of country

            TODO:  Why is there a "country" and a "countryCode".  The examples in the published doc only include country and show a code value not a name.
        countryCode:
          type: string
          description: |-
            Country code of country conforming to standard ISO-3166 [https://www.iso.org/iso-3166-country-codes.html](https://www.iso.org/iso-3166-country-codes.html)

            TODO are these 2 or 3 character codes?
            TODO should this be an enumerated list?
        buildingName:
          type: string
          description: Building name
        buildingFloor:
          type: string
          description: Building floor
        isle:
          type: string
          description: isle 1
        bin:
          type: string
          description: bin 5
        parkingName:
          type: string
          description: 'Yard/Parking/Any kind of open structure: Lot Name, Floor, Isle, LotId'
        level:
          type: string
          description: L5
        lotId:
          type: string
          description: Lot15
